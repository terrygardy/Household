@using GARTE.TypeHandling;
@using Household.Localisation.Main.MasterData;

@model Household.Models.MasterData.CIncomeModel

@{
	string m_strBaseAction = Url.Action("", "Income");
}

<div class="w100">
	<div class="col-xs-12 col-sm-6">
		@Html.LabelFor(m => m.Income.StartDate)<span> (dd.mm.yyyy)</span>
		<input type="text" id="tbxStart" data-bind="value: StartDate" required />
	</div>
	<div class="col-xs-12 col-sm-6">
		@Html.LabelFor(m => m.Income.EndDate)<span> (dd.mm.yyyy)</span>
		<input type="text" id="tbxEnd" data-bind="value: EndDate" />
	</div>
	<div class="col-xs-12 col-sm-6">
		<span>@IntervalText.Interval</span>
		<select id="cboInterval" data-bind="value: Interval_ID" required>
			@Html.DisplayFor(m => m.Intervals, "SelectOptions")
		</select>
	</div>
	<div class="col-xs-12 col-sm-6">
		<span>@DayText.Day</span>
		<select id="cboDay" data-bind="value: Day_ID" required>
			@Html.DisplayFor(m => m.Days, "SelectOptions")
		</select>
	</div>
	<div class="col-xs-12 col-sm-6">
		<span>@BankAccountText.BankAccount</span>
		<select id="cboBankAccount" data-bind="value: Payee_ID" required>
			@Html.DisplayFor(m => m.BankAccounts, "SelectOptions")
		</select>
	</div>
	<div class="col-xs-12 col-sm-6">
		<span>@CompanyText.Company</span>
		<select id="cboCompany" data-bind="value: Company_ID">
			@Html.DisplayFor(m => m.Companies, "SelectOptions")
		</select>
	</div>
	<div class="col-xs-12 col-sm-6">
		@Html.LabelFor(m => m.Income.Amount)<span>(€)</span>
		<input type="text" id="tbxAmount" data-bind="value: Amount" required />
	</div>
	<div class="col-xs-12">
		@Html.LabelFor(m => m.Income.Description)
		<textarea id="tbxDescription" data-bind="value: Description" />
	</div>
</div>

@Scripts.Render("~/bundles/Income")
<script type="text/javascript">
	(function () {
		Income.Fill('@Html.Raw(m_strBaseAction)', @Model.Income.ID, '@Base.convertShortDateString(Model.Income.StartDate)', '@Base.convertShortDateString(Model.Income.EndDate)',
					@Base.convertLong(Model.Income.Interval_ID).ToString(), @Base.convertLong(Model.Income.Day_ID).ToString(), @Base.convertLong(Model.Income.Payee_ID).ToString(),
					@Base.convertLong(Model.Income.Company_ID).ToString(), '@Model.Income.Amount.ToString("N2")', '@Html.Raw(HttpUtility.JavaScriptStringEncode(Model.Income.Description))');
		MasterData.start();
		Income.start();
	})();
</script>